<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tienda Bastet | Recargas y Carrito con WhatsApp</title>
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --card:#111827; /* gray-900 */
      --muted:#64748b; /* slate-500 */
      --text:#e5e7eb; /* gray-200 */
      --brand:#22c55e; /* green-500 */
      --accent:#38bdf8; /* sky-400 */
      --danger:#ef4444; /* red-500 */
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:linear-gradient(180deg,#0b1022,#111827 30%);color:var(--text)}
    header{
      position:sticky;top:0;z-index:50;
      backdrop-filter:saturate(1.2) blur(8px);
      background:rgba(2,6,23,.7);
      border-bottom:1px solid rgba(148,163,184,.15);
    }
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .row{display:flex;gap:16px;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:12px;align-items:center;font-weight:700;letter-spacing:.3px}
    .brand img{width:36px;height:36px;border-radius:10px;box-shadow:var(--shadow)}
    .pill{display:inline-flex;align-items:center;gap:8px;background:#0b1220;border:1px solid rgba(148,163,184,.18);padding:10px 14px;border-radius:999px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;border-radius:12px;border:none;cursor:pointer;font-weight:600;color:#0b1220;background:var(--accent);box-shadow:var(--shadow)}
    .btn.secondary{background:#0b1220;color:var(--text);border:1px solid rgba(148,163,184,.18)}
    .btn.danger{background:var(--danger);color:white}
    .btn.brand{background:var(--brand);color:#06210e}
    .grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:16px}
    @media(min-width:640px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(min-width:980px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
    .card{background:linear-gradient(180deg,#0b1220,#0e1628);border:1px solid rgba(148,163,184,.15);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .thumb{height:140px;background:#fb923c linear-gradient(135deg,#fb923c,#f97316);display:flex;align-items:center;justify-content:center;color:#0b1220;font-weight:900;font-size:28px}
    .card .body{padding:16px}
    .title{font-weight:700;font-size:18px;line-height:1.2;margin:0 0 6px}
    .price{font-size:22px;font-weight:800;color:#93c5fd}
    .muted{color:var(--muted);font-size:14px}
    .qty{display:flex;gap:8px;align-items:center;margin:10px 0}
    .qty input{width:64px;padding:10px;border-radius:10px;border:1px solid rgba(148,163,184,.2);background:#0a1220;color:var(--text)}

    .section{margin:24px 0}
    .section h2{margin:0 0 8px}

    /* Cart drawer */
    .drawer{position:fixed;right:-420px;top:0;height:100%;width:420px;max-width:92vw;background:#0b1220;border-left:1px solid rgba(148,163,184,.2);box-shadow:var(--shadow);transition:right .28s ease;z-index:60;display:flex;flex-direction:column}
    .drawer.open{right:0}
    .drawer header{position:sticky;top:0;background:#0b1220}
    .drawer .content{padding:16px;overflow:auto;flex:1}
    .item{display:flex;justify-content:space-between;align-items:center;padding:10px;border:1px solid rgba(148,163,184,.15);border-radius:12px;margin:8px 0;background:#0d1628}
    .item .name{font-weight:600}
    .item .sub{font-size:12px;color:var(--muted)}
    .item .controls{display:flex;align-items:center;gap:8px}
    .item input{width:56px;padding:6px;border-radius:8px;border:1px solid rgba(148,163,184,.2);background:#0a1220;color:var(--text)}

    .field{display:flex;flex-direction:column;gap:6px;margin:10px 0}
    .field input, .field textarea, .field select{padding:12px;border-radius:12px;border:1px solid rgba(148,163,184,.2);background:#0a1220;color:var(--text)}
    .note{font-size:13px;color:var(--muted)}
    .footer{padding:16px;border-top:1px solid rgba(148,163,184,.15)}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(2,6,23,.6);display:none;align-items:center;justify-content:center;z-index:70}
    .modal.open{display:flex}
    .modal .box{background:#0b1220;border:1px solid rgba(148,163,184,.2);border-radius:18px;box-shadow:var(--shadow);max-width:640px;width:92vw;padding:18px}
    .tag{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px dashed rgba(148,163,184,.35);color:#cbd5e1}

    a{color:#93c5fd;text-decoration:none}
    footer{opacity:.8}
  </style>
</head>
<body>


<script>
// Evitar acceso sin sesi√≥n
if (localStorage.getItem("loggedIn") !== "true") {
    window.location.href = "index.html";
}

let currentUserEmail = localStorage.getItem("currentUser");
let users = JSON.parse(localStorage.getItem("users")) || [];
let currentUserData = users.find(u => u.user === currentUserEmail);

// Mostrar datos
document.getElementById("correo").textContent = "Correo: " + currentUserEmail;
document.getElementById("saldo").textContent = "Saldo disponible: $" + (currentUserData?.saldo || 0);

// Mostrar historial
let historyContainer = document.getElementById("historyList");
if (currentUserData?.recargas?.length > 0) {
    currentUserData.recargas.forEach(r => {
        let div = document.createElement("div");
        div.classList.add("historyItem");
        div.textContent = `${r.fecha} - $${r.monto}`;
        historyContainer.appendChild(div);
    });
} else {
    historyContainer.innerHTML = "<p>No tienes recargas registradas.</p>";
}

function logout(){
    localStorage.setItem("loggedIn", "false");
    localStorage.removeItem("currentUser");
    window.location.href = "index.html";
}
</script>


  <!-- ===== Configuraci√≥n editable ===== -->
  <script>
    const CONFIG = {
      businessName: "TIGRESHOP byAle",
      whatsappNumber: "5219231151776", // SIN +, con lada (ejemplo: 52 M√©xico + n√∫mero)
      bank: {
        titular: "ALEJANDRO CASANGO",
        banco: "BANCO EJEMPLO",
        clabe: "722969020698773850",
        referencia: "TIGRESHOP-RECARGA"
      },
      currency: "MXN"
    };
  </script>
<!-- P√°gina de autenticaci√≥n -->
<div id="authPage" style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background:#0f172a;color:white;">
  <h2 id="authTitle">Registro</h2>
  
  <input id="authUser" type="text" placeholder="Usuario" style="padding:10px;margin:5px;">
  <input id="authPass" type="password" placeholder="Contrase√±a" style="padding:10px;margin:5px;">
  
  <button id="authBtn" style="padding:10px;margin:5px;">Registrarse</button>
  <p id="toggleAuth" style="cursor:pointer;color:#38bdf8;">¬øYa tienes cuenta? Inicia sesi√≥n</p>
</div>


  <header>
    <div class="wrap row">
      <div class="brand">
          <header style="background:#0b1220; padding:16px; text-align:center;">
  <!-- Logo centrado -->
  
<!-- Logo centrado -->
<img src="Tigre.jpg" alt="Logo Tigre" style="display:block; margin:0 auto; width:150px; height:auto;">

<span id="brandName" style="display:block; text-align:center; font-weight:bold; font-size:18px;">
  TIGRESHOP byAle
</span>




   

<script>
document.getElementById("logoutBtn").addEventListener("click", function(){
    localStorage.removeItem("loggedIn");
    localStorage.removeItem("currentUser");
    window.location.href = "index.html"; // Aqu√≠ pones el nombre de tu archivo del login
});
</script>

      
      <div class="row">
        <span class="pill">Saldo: <strong id="saldoSpan">$0.00</strong></span>
        <button class="btn brand" id="btnRecargar">Recargar saldo</button>
        <button class="btn secondary" id="btnCart">Carrito</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="section">
      <h2>Servicios</h2>
      <p class="note">A√±ade productos al carrito. Al finalizar, se generar√° un mensaje listo para WhatsApp con el pedido, tu correo y contrase√±a (si lo autorizas). El env√≠o de <em>capturas</em> debe adjuntarse manualmente desde WhatsApp.</p>
      <div id="productGrid" class="grid"></div>
    </section>

    <section class="section">
      <h2>¬øC√≥mo recargar tu saldo?</h2>
      <ol class="note">
        <li>1) Da clic en <strong>Recargar saldo</strong> y escribe el monto que vas a depositar/transferir.</li>
        <li>2) Deposita a los datos bancarios mostrados.</li>
        <li>3) Pulsa <strong>Enviar comprobante por WhatsApp</strong> para abrir el chat con el texto prellenado y adjunta tu captura.</li>
        <li>4) Cuando confirmemos, tu saldo se actualiza.</li>
      </ol>
    </section>
  </main>

  <!-- Drawer Carrito -->
  <aside class="drawer" id="drawer">
    <header class="wrap row" style="padding:12px 16px">
      <strong>Tu carrito</strong>
      <button class="btn secondary" id="closeCart">Cerrar</button>
    </header>
    <div class="content">
      <div id="cartItems"></div>

      <div class="field">
        <label>Correo y n√∫mero para enviar la cuenta</label>
        <input id="inpCorreo" type="email" placeholder="tucorreo@ejemplo.com" />
        
          <input id="inpNumero" type="num" placeholder="tununero" />
      </div>
      
         <div>  
        <span class="note">Nota: El correo y contrase√±a de la cuenta se enviaran al correo y n√∫mero que proporciones.</span>
      </div>
      <div class="field">
        <label>M√©todo de pago</label>
        <select id="inpMetodo">
          <option value="saldo">Saldo</option>
          <option value="transferencia">Transferencia/Dep√≥sito</option>
        </select>
      </div>

      <div class="field">
        <div class="tag">Total: <strong id="totalSpan">$0.00</strong></div>
      </div>

      <div class="row" style="justify-content:space-between">
        <button class="btn secondary" id="btnVaciar">Vaciar</button>
        <button class="btn brand" id="btnCheckout">Finalizar compra</button>
      </div>
    </div>
    <div class="footer">
      <div class="wrap note">
        Al pagar con <strong>transferencia</strong> se abrir√° WhatsApp con tu pedido y podr√°s adjuntar el comprobante.
      </div>
    </div>
  </aside>

  <!-- Modal Recarga -->
  <div class="modal" id="modalRecarga">
    <div class="box">
      <div class="row" style="justify-content:space-between;align-items:flex-start">
        <div>
          <h3 style="margin:.2rem 0">Recargar saldo</h3>
          <p class="note">Haz el dep√≥sito y m√°ndanos el comprobante por WhatsApp.</p>
        </div>
        <button class="btn secondary" id="closeRecarga">Cerrar</button>
      </div>

      <div class="field">
        <label>Monto a recargar (MXN)</label>
        <input id="inpMonto" type="number" min="1" step="1" placeholder="Ej. 200" />
      </div>

      <div class="field">
        <label>Referencia (opcional)</label>
        <input id="inpRef" type="text" placeholder="Ej. BASTET-RECARGA-123" />
      </div>

      <div class="section">
        <h3>Datos bancarios</h3>
        <div class="card" style="padding:14px">
          <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr))">
            <div>
              <div class="muted">Titular</div>
              <div id="bankTitular" style="font-weight:700"></div>
            </div>
            <div>
              <div class="muted">Banco</div>
              <div id="bankBanco" style="font-weight:700"></div>
            </div>
            <div>
              <div class="muted">CLABE</div>
              <div id="bankClabe" style="font-weight:700"></div>
            </div>
          </div>
          <div style="margin-top:8px" class="note">Referencia sugerida: <strong id="bankRef"></strong></div>
        </div>
      </div>

      <div class="row" style="justify-content:flex-end;gap:10px">
        <button class="btn secondary" id="btnCopiarBanco">Copiar datos</button>
        <button class="btn brand" id="btnWaRecarga">Enviar comprobante por WhatsApp</button>
      </div>
    </div>
  </div>

  <footer class="wrap" style="margin:28px 0 40px">
    <div class="note">¬© <span id="year"></span> <span id="brandName2">Bastet byLu</span>. Esta es una demo 100% frontal (sin servidor). Ajusta tu n√∫mero de WhatsApp y tus datos bancarios en la secci√≥n <em>CONFIG</em> del c√≥digo.</div>
  </footer>

  <script>
    // ===== Utilidades =====
    const $ = (sel)=>document.querySelector(sel);
    const fmt = (n)=> new Intl.NumberFormat('es-MX',{style:'currency',currency:'MXN'}).format(n||0);

    // ===== Estado =====
    const state = {
      saldo: Number(localStorage.getItem('saldo')||0),
      cart: JSON.parse(localStorage.getItem('cart')||'[]')
    };

    // ===== Productos de ejemplo (edita libremente) =====
    const PRODUCTS = [
      {id:'cr-mega-cuenta', name:'CRUNCHYROLL MEGA FAN (Cuenta completa)', price:2, tag:'1 cuenta', cover:'CR'},
      {id:'cr-mega-perfil', name:'CRUNCHYROLL MEGA FAN (Perfil)', price:2, tag:'1 perfil', cover:'CR'},
      {id:'disney-premium', name:'DISNEY+ PREMIUM', price:2, tag:'Perfil', cover:'D+'},
      {id:'max-premium', name:'MAX PREMIUM', price:2, tag:'Perfil', cover:'MAX'},
      {id:'spotify-familiar', name:'SPOTIFY FAMILIAR', price:2, tag:'Perfil', cover:'S'},
      {id:'paramount', name:'PARAMOUNT+', price:2, tag:'Perfil', cover:'P+'}
    ];

    // ===== Render =====
    const renderSaldo = ()=> $('#saldoSpan').textContent = fmt(state.saldo);

    function renderProducts(){
      const grid = $('#productGrid');
      grid.innerHTML = '';
      for(const p of PRODUCTS){
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb">${p.cover}</div>
          <div class="body">
            <h3 class="title">${p.name}</h3>
            <div class="muted">${p.tag}</div>
            <div class="price">${fmt(p.price)}</div>
            <div class="qty">
              <label class="muted">Cantidad</label>
              <input type="number" min="1" step="1" value="1" />
            </div>
            <button class="btn brand" data-id="${p.id}">Agregar</button>
          </div>`;
        grid.appendChild(card);
        const btn = card.querySelector('button');
        const qty = card.querySelector('input');
        btn.addEventListener('click',()=>{
          addToCart(p, Number(qty.value||1));
        })
      }
    }

    function renderCart(){
      const cont = $('#cartItems');
      cont.innerHTML = '';
      let total = 0;
      for(const item of state.cart){
        const li = document.createElement('div');
        li.className = 'item';
        total += item.price * item.qty;
        li.innerHTML = `
          <div>
            <div class="name">${item.name}</div>
            <div class="sub">${fmt(item.price)} ¬∑ ${item.tag}</div>
          </div>
          <div class="controls">
            <input type="number" min="1" value="${item.qty}" />
            <button class="btn secondary">Quitar</button>
          </div>`;
        cont.appendChild(li);
        li.querySelector('input').addEventListener('change', (e)=>{
          item.qty = Math.max(1, Number(e.target.value||1));
          save();
          renderCart();
        });
        li.querySelector('button').addEventListener('click',()=>{
          state.cart = state.cart.filter(x=>x.id!==item.id);
          save();
          renderCart();
        });
      }
      $('#totalSpan').textContent = fmt(total);
      if(!state.cart.length){
        cont.innerHTML = '<div class="note">Tu carrito est√° vac√≠o.</div>';
      }
    }

    function save(){
      localStorage.setItem('cart', JSON.stringify(state.cart));
      localStorage.setItem('saldo', String(state.saldo));
      renderSaldo();
    }

    // ===== Acciones =====
    function addToCart(p, qty){
      const found = state.cart.find(x=>x.id===p.id);
      if(found) found.qty += qty; else state.cart.push({...p, qty});
      save();
      renderCart();
      openCart();
    }

    function openCart(){ $('#drawer').classList.add('open'); }
    function closeCart(){ $('#drawer').classList.remove('open'); }

    // ===== Checkout =====
    function buildOrderText(){
      let lines = [];
      lines.push(`*${CONFIG.businessName}* - Pedido nuevo`);
      lines.push('');
      state.cart.forEach((it,i)=>{
        lines.push(`${i+1}. ${it.name} x${it.qty} ‚Äî ${fmt(it.price*it.qty)}`);
      });
      const total = state.cart.reduce((a,b)=>a+b.price*b.qty,0);
      lines.push('');
      lines.push(`Total: ${fmt(total)}`);
      lines.push(`M√©todo de pago: ${$('#inpMetodo').value}`)    ;   
      const notas = $('#inpNotas').value.trim();
      if(notas){ lines.push('Notas: ' + notas); }
      lines.push('');
      lines.push('Gracias.');
      return lines.join('\n');
    }      

    function checkout(){
    if(!state.cart.length){ alert('Tu carrito est√° vac√≠o.'); return; }
    const metodo = $('#inpMetodo').value;
    const total = state.cart.reduce((a,b)=>a+b.price*b.qty,0);

    const currentUser = localStorage.getItem("currentUser");
    const users = JSON.parse(localStorage.getItem("users")) || [];
    const userIndex = users.findIndex(u => u.user === currentUser);

    if(metodo==='saldo'){
        if(userIndex === -1 || users[userIndex].saldo < total){
            alert('Saldo insuficiente. Recarga primero.');
            return;
        }
        // Descontar saldo
        users[userIndex].saldo -= total;
        localStorage.setItem("users", JSON.stringify(users));
        state.saldo = users[userIndex].saldo;
        renderSaldoCliente(); // actualizar pantalla
    }

    const text = encodeURIComponent(buildOrderText());
    const url = `https://wa.me/${CONFIG.whatsappNumber}?text=${text}`;
    window.open(url,'_blank');

    // limpiar carrito
    state.cart = [];
    save();
    renderCart();
    closeCart();
}


    // ===== Recargas =====
    function openRecarga(){ $('#modalRecarga').classList.add('open'); }
    function closeRecarga(){ $('#modalRecarga').classList.remove('open'); }

    function fillBank(){
      $('#bankTitular').textContent = CONFIG.bank.titular;
      $('#bankBanco').textContent = CONFIG.bank.banco;
      $('#bankClabe').textContent = CONFIG.bank.clabe;
      $('#bankRef').textContent = CONFIG.bank.referencia;
    }

    function sendRecarga(){
      const monto = Number($('#inpMonto').value||0);
      if(!monto || monto<=0){ alert('Escribe un monto v√°lido.'); return; }
      const ref = $('#inpRef').value || CONFIG.bank.referencia;
      const lines = [
        `*${CONFIG.businessName}* - Solicitud de recarga`,
        '',
        `Monto: ${fmt(monto)}`,
        `Referencia: ${ref}`,
        '',
        'Adjunto mi comprobante de dep√≥sito.'
      ];
      const url = `https://wa.me/${CONFIG.whatsappNumber}?text=${encodeURIComponent(lines.join('\n'))}`;
      window.open(url,'_blank');
      // Opcional: marca recarga como pendiente en localStorage
      const pend = JSON.parse(localStorage.getItem('recargasPendientes')||'[]');
      pend.push({monto, ref, ts:Date.now()});
      localStorage.setItem('recargasPendientes', JSON.stringify(pend));
    }

    // ===== Eventos UI =====
    $('#btnCart').addEventListener('click', openCart);
    $('#closeCart').addEventListener('click', closeCart);
    $('#btnCheckout').addEventListener('click', checkout);
    $('#btnVaciar').addEventListener('click', ()=>{state.cart=[]; save(); renderCart();});

    $('#btnRecargar').addEventListener('click', openRecarga);
    $('#closeRecarga').addEventListener('click', closeRecarga);
    $('#btnWaRecarga').addEventListener('click', sendRecarga);
    $('#btnCopiarBanco').addEventListener('click', ()=>{
      const t = `Titular: ${CONFIG.bank.titular}\nBanco: ${CONFIG.bank.banco}\nCuenta: ${CONFIG.bank.cuenta}\nCLABE: ${CONFIG.bank.clabe}\nReferencia: ${CONFIG.bank.referencia}`;
      navigator.clipboard.writeText(t).then(()=>alert('Datos bancarios copiados.'));
    });

    // ===== Init =====
    document.addEventListener('DOMContentLoaded', ()=>{
      $('#brandName').textContent = CONFIG.businessName;
      $('#brandName2').textContent = CONFIG.businessName;
      $('#year').textContent = new Date().getFullYear();
      fillBank();
      renderSaldo();
      renderProducts();
      renderCart();
    });
  </script>
  <script>
document.getElementById("btnCheckout").addEventListener("click", function () {
    let correo = document.getElementById("inpCorreo").value.trim();
    let numero = document.getElementById("inpNumero").value.trim();
    let metodo = document.getElementById("inpMetodo").value;
    let totalTexto = document.getElementById("totalSpan").innerText.replace("$", "").trim();
    let total = parseFloat(totalTexto);

    // Aqu√≠ lees tu saldo mostrado en pantalla
    let saldoTexto = document.getElementById("saldoSpan")?.innerText.replace("$", "").trim() || "0";
    let saldo = parseFloat(saldoTexto);

    // Validar que el correo termine con @gmail.com
    if (!correo.endsWith("@gmail.com")) {
        alert("Por favor ingresa un correo v√°lido que termine en @gmail.com");
        return;
    }

    // Validar n√∫mero (solo d√≠gitos y no vac√≠o)
    if (!/^\d+$/.test(numero)) {
        alert("Por favor ingresa un n√∫mero v√°lido (solo d√≠gitos).");
        return;
    }

    // Validar saldo suficiente
    if (saldo < total) {
        alert("No tienes saldo suficiente para completar la compra.");
        return;
    }

    // N√∫mero de WhatsApp destino
    let numeroWhatsApp = "5219231151776"; // con c√≥digo de pa√≠s

    // Crear mensaje del ticket
    let mensaje = `üõí *Ticket de compra* üõí\n\n` +
                  `üìß Correo: ${correo}\n` +
                  `üì± N√∫mero: ${numero}\n` +
                  `üí≥ M√©todo de pago: ${metodo}\n` +
                  `üí∞ Total: $${total.toFixed(2)}\n\n` +
                  `Gracias por su compra üôå`;

    // Abrir WhatsApp con el mensaje
    let url = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensaje)}`;
    window.open(url, "_blank");
});

// --- Control de acceso ---
if (localStorage.getItem("loggedIn") === "true") {
    document.getElementById("authPage").style.display = "none";
} else {
    document.querySelector("header").style.display = "none";
    document.querySelector("main").style.display = "none";
    document.querySelector("footer").style.display = "none";
}

// Estado inicial: false = registro, true = login
let isLogin = false;

document.getElementById("toggleAuth").addEventListener("click", function(){
    isLogin = !isLogin;
    updateAuthUI();
});

function updateAuthUI(){
    document.getElementById("authTitle").textContent = isLogin ? "Iniciar sesi√≥n" : "Registro";
    document.getElementById("authBtn").textContent = isLogin ? "Entrar" : "Registrarse";
    document.getElementById("toggleAuth").textContent = isLogin ? "¬øNo tienes cuenta? Reg√≠strate" : "¬øYa tienes cuenta? Inicia sesi√≥n";
}
updateAuthUI();

document.getElementById("authBtn").addEventListener("click", function(){
    let user = document.getElementById("authUser").value.trim();
    let pass = document.getElementById("authPass").value.trim();

    if (!user || !pass) {
        alert("Por favor completa todos los campos");
        return;
    }

    // Leer lista de usuarios guardados o inicializar vac√≠a
    let users = JSON.parse(localStorage.getItem("users")) || [];

    if (isLogin) {
        // Iniciar sesi√≥n
        let foundUser = users.find(u => u.user === user && u.pass === pass);
        if (foundUser) {
            localStorage.setItem("loggedIn", "true");
            localStorage.setItem("currentUser", user);
            location.reload();
        } else {
            alert("Usuario o contrase√±a incorrectos");
        }
    } else {
        // Registrar usuario
        let exists = users.some(u => u.user === user);
        if (exists) {
            alert("Este usuario ya est√° registrado. Por favor, inicia sesi√≥n.");
            return;
        }
        users.push({ user: user, pass: pass });
        localStorage.setItem("users", JSON.stringify(users));
        alert("Cuenta creada con √©xito. Ahora inicia sesi√≥n.");
        isLogin = true;
        updateAuthUI();
        document.getElementById("authUser").value = "";
        document.getElementById("authPass").value = "";
    }
});

// Cerrar sesi√≥n
function logout(){
    localStorage.setItem("loggedIn", "false");
    localStorage.removeItem("currentUser");
    location.reload();
}


</script>
<script>
function renderSaldoCliente() {
    const currentUser = localStorage.getItem("currentUser");
    const users = JSON.parse(localStorage.getItem("users")) || [];
    const user = users.find(u => u.user === currentUser);
    const saldo = user ? user.saldo || 0 : 0;
    state.saldo = saldo; // importante: actualiza estado
    document.getElementById("saldoSpan").textContent = `$${saldo.toFixed(2)}`;
}

document.addEventListener("DOMContentLoaded", () => {
    renderSaldoCliente();
});
</script>





</body>
</html>
